---
const {flagImg,flagImgP1,flagImgP2,currentLang, homeTxt, contactTxt, cocktailsTxt, currentPath = '/'} = Astro.props;
// Compute a href for a target language preserving the current path after the language segment.
function makeLangHref(targetLang: string) {
  const path = (currentPath && typeof currentPath === 'string') ? currentPath : '/';
  const normalized = path.startsWith('/') ? path : '/' + path;
  // Remove leading /{currentLang} or leading /{currentLang}/
  const withoutLang = normalized.replace(new RegExp(`^/${currentLang}(/|$)`), '/');
  const suffix = withoutLang === '/' ? '/' : withoutLang;
  return `/${targetLang}${suffix}`;
}
import Image from "astro/components/Image.astro";
import logo from '../../assets/logos/koj_logo.png';
---

<header class="navbar bg-base-100 shadow-sm sticky top-0 z-50 px-4">
  <div class="flex-1">
    <a href={currentLang + '/'}><Image src={logo} alt="Logo" class="w-10"></Image></a>
  </div>
  <div class="flex-none">
    <ul class="menu menu-horizontal px-1">
      <li><a href={'/'+currentLang + '/'} >{homeTxt}</a></li>
      <li><a href={'/'+currentLang + '/cocktails'}>{cocktailsTxt}</a></li>
      <li><a href={'/'+currentLang + '/contact'}>{contactTxt}</a></li>

      <li>
        <details>
          <summary>
            <Image
              src={
                currentLang === 'es'
                  ? flagImg
                  : currentLang === 'en'
                  ? flagImgP1
                  : flagImgP2
              }
              alt={`Flag ${currentLang}`}
              class="w-8"
            ></Image>
          </summary>
            <ul class="bg-base-100 rounded-t-none p-2">
            <li><a href={makeLangHref('es')}><Image src={flagImg} alt="ES" class="w-8"></Image></a></li>
            <li><a href={makeLangHref('en')}><Image src={flagImgP1} alt="EN" class="w-8"></Image></a></li>
            <li><a href={makeLangHref('fr')}><Image src={flagImgP2} alt="FR" class="w-8"></Image></a></li>
          </ul>
        </details>
      </li>
    </ul>
  </div>
</header>
<style>
  li{
    font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
    font-weight: 600;
    font-size: 16px;
  }
</style>